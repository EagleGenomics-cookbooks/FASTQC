sudo: required
dist: trusty
addons:
  apt:
    sources:
    - chef-stable-trusty
    packages:
    - chefdk
install: echo "skip bundle install"
branches:
  only:
  - master
services: docker
env:
  matrix:
  - INSTANCE=default-centos-65
  global:
    COMMIT=${TRAVIS_COMMIT::8}
  DOCKER_EMAIL:
    secure: ftmokpz22fFWLIc1P6ehIEXU2/z6ivgFNIyCxsLtXlPnFlOSD1MAP5s1/AtiV47Mj31baNXWox+HbxC5yzSSCF7/Jwl5+CaY+VoYltxPWfq8BJgXHTgMYB+Ujh3Bl/OGaFFtFslkTw0/9UFYYXIyORK0xvKYSRWzpz4/rcpCElCjCTe7PluVO4VQX/wv1KCMwFlxdQdm44VIlpQ9Ha5Edku2P4gu5IKdorEWEuHh8shQWCQ7X7f96gpl42k2fU6FelW1XnRNEH/nCOp779LWGk8cF1m4Cgp2e9uF3XXG35oABYlGpbrimsjp4U7nJPeQeiiOqW2A2ze877YlnGGjAm1RB1H9Kah6VMfKRAtvGf4VHphsBhPpawxxS4xhrBbEQLAjhr56PJipz+jttqcvm0SzsR/wclF+NkRKLGZMY+9LRgxJyJnVgYOeFnTRJSThYpd5OlCUSJ0+YxtnDG5RaW1xLUmGK928bD3934bo2us1fx4s2zjsmWkAFhLjiTmQem7PGlFJ+MKk9RYJTlExUhtRVLYM9pCyzE+Hf5K4heu+8tS9Jln8T5yvjEN5qhmdx3zql47CQ4JST7wgyAzEifmjtDjWQu81SF6iK0/zSUCJB+tBYrlzAIjIiSC8v9lEgwx3ZKcE5hTA+0RD/ef2V+adI45DNh1yDZoaA1A5PZQ=
  DOCKER_USER:
    secure: LPB/2R8p6pQ6QUHEKf0vi+6aqLdpxPeI0d3wtl47sUuFrXzMHQ/KldOGEWjmmOqMPnPR+XiJRucd1D2HZLxBxf79aDt9A8i4AuZn0+ZC/EkW122rpOXqDOwa8+jPR5kcR/chTNRJxFcqxqSY31oFAhHtCFJaI6l1dR6iizHNo+izsHGjpJ3nCIWYUcOu/9dO9cmXyOxjfOh2o0KNCO1nbvlz787b1+36ygXRBd0n5scDPCECZT/X57YdsWYMW1ZrXYhwme3rOFW2l0CGO5VtY/IW0FczLy/W5y1/dwwLhxz2JFErIFP3aGZCxmAiiqSRWO9YJErZuw6Q2N4ML2i6Z2pyCuNtSkt0dTdistaKVUhKa3HsbcqOHr1FnOd2zaMk3SITpQ0PapFAQp+LOyvrnSYoc/NvClHEsArEztxJ3xfmYiTWBXSwEIY7fHG7ZXNfgV2sX3ME1QB4IezgNHL2Xnds3if+BcS0oRDN6VaJq43abEleqU5QlmwWuBI0Cszzf3eJITwkFJHAXK9lRLRq9RjMtplIOeZw3bPCzu2AeGkA7uTHDDvDLcO8lpDRlWdPiAHoATVruMe9d4Ppt/uza9Od9MQTj6Ngl0aRhoRdjO9i/61pansCfJEOALuosqRF4w68CVP/u1268gyrJ1yONkZ6Tp6NMGkZsFK7k46MsWU=
  DOCKER_PASS:
    secure: jIlOJWGZKT5K8VU1Oc1I389CtY4XBrlpy2OSpBtpHrxxQ1NPAh8IgapABw240zK3pMnOEcXsQ++aSljAitQ6rCpMOmhPnoGJ92U45y9lDdWrKFrMo7Ir8fBPAVXFbM81vE65GkjwNOpuOHWgnWLzaU6t8KqjFpheIxsHle5Mcb6k6ELmKsPFvRq00s+J8/yxf7fpxX5IlME3G7lsfokp1CCdQbAAlmoXk95ufdQ0qyhCzm1stl8mBid+42f6hE7NTeEnHBOkJwjrCipdH7ypps7bpWifq1Rp1Fxy8L9nCSH4Y4iF3aEFqZfxLV6sZzyBVpmb2lR1zGBCZTJ0ADvz1UJU2pQZjr/ViLQh49CbjwyxjD3vTcpzHVa7e31K5VEuTjNx2ReFKlKxvHZlt9CNMfAzFh5ETpBipUhFxONG0dC3CKZ1UTZ//hKOO6xogexWiiBZzU5Jp+z9yz7vBy5U3jop9djQcL9vJnyNx64oR+lQXSVnZ9tXLVAKlfTKqtdPt4o5eqFT5FvJdyIk0+pSTqDqn0q/K+feL5hKiISFX87jixeJuALiF2j8f0ZD7XonEROBW3eR34JMAZSv6euOwdGqu/n2c8rmSzPMIKaUrF4VFfOIDkfZ/OPquE0cp8tS1N8xL4pEIZuZ0QnLIWzL9p29nXxBWdkWfRnQW+jGLvg=

before_script:
- sudo iptables -L DOCKER || ( echo "DOCKER iptables chain missing" ; sudo iptables
  -N DOCKER )
- eval "$(/opt/chefdk/bin/chef shell-init bash)"
- "/opt/chefdk/embedded/bin/chef --version"
- "/opt/chefdk/embedded/bin/cookstyle --version"
- "/opt/chefdk/embedded/bin/foodcritic --version"
- "/opt/chefdk/bin/chef exec rake"
- chef gem install kitchen-docker
script: KITCHEN_LOCAL_YAML=.kitchen.docker.yml /opt/chefdk/embedded/bin/kitchen verify
  ${INSTANCE} ${INSTANCE}
after_success:
  - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
  - docker push $DOCKER_USER/fastqc_dep
notifications:
  slack:
    rooms:
      secure: KZW2IXMXSPTCkIqcuRH3dEllcsAg88+fXeYsWjyKkfaOOk94mCYArcpHxPoMciE6tmOE+5aywLwnyoS1LedMgkdbHnCA4XmPfoofcPcKTC7vqVzygaD3B6lFvIebUXGUCdnPzsqzwAV+eKtrowuvNqOVGNzpaz811z+Yn9p+xQ7ijSHwXtBspdKS8kHWJv0CqPQMm88+hoIsRlDHHhVgxswTvqzipGNzO2AOgHVDAYuFU1fEw6NhhfNSNplhvm2OhZ2iARvhMXg2NaNIx0XHiV3axi++SDi5Oss5KmYBCKQPBuUqmrbnPjC3OrbAJGu88zqQDaQAU/bDGtQihfFG6gdpDM+7Vw+2mHShwRWG68aE6yVuiVK+IwqYHykNAqKDpvgGVr4QFZt8FDPX/FGAFl88Qi8SNPtkiQ8wqKVb6oGM54gxhHHAAfotHUZn4T+Eo4Flp3YlhfIZlwGGYXSw4ve+96WGYshNY+VPIulV9z+uEiqdstf/dwjgbyCiHPSH7EDKkchuz3l/XvsZKhH53G/5oDIGsfMDigJNzu0UJj/osdhrmwXzZpw2NGXhFe0ce4pdcqW50/ijJMsdWV9LohUYBXZ3iuyIkIdwbM/vThDpD5Q9cuc+FxOzftnAWbGoSsAjWU122RSaeQC2+T1aXOgCiqmralGsHF+YXZTqUMk=
